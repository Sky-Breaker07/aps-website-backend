<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Happy Birthday, <%= name %>!</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.9.1/gsap.min.js"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Pacifico&family=Roboto:wght@400;700&display=swap');
    </style>
</head>
<body class="bg-gradient-to-r from-purple-600 to-pink-600 min-h-screen flex items-center justify-center overflow-hidden font-['Roboto']">
    <div id="particles-js" class="absolute inset-0"></div>
    <div class="relative z-10 text-center p-8 bg-white bg-opacity-20 backdrop-filter backdrop-blur-lg rounded-3xl shadow-2xl">
        <h1 class="text-7xl font-['Pacifico'] text-white mb-6 animate-bounce">Happy Birthday, <%= name %>!</h1>
        <p class="text-2xl text-white mb-8">Wishing you an amazing day filled with joy and laughter!</p>
        <div class="bg-white p-8 rounded-2xl shadow-lg mb-8">
            <p class="text-2xl text-gray-800 mb-4">Your age: <span class="font-bold text-3xl text-purple-600"><%= age %></span></p>
            <p class="text-2xl text-gray-800">Your birthday: <span class="font-bold text-3xl text-pink-600"><%= birthday %></span></p>
        </div>
        <div class="mb-8">
            <h2 class="text-3xl font-bold text-white mb-4">Countdown to your next birthday:</h2>
            <div id="countdown" class="text-4xl font-bold text-white"></div>
        </div>
        <div class="mb-8">
            <h2 class="text-3xl font-bold text-white mb-4">Your personalized birthday message:</h2>
            <p id="typedMessage" class="text-2xl text-white"></p>
        </div>
        <button id="cakeButton" class="bg-yellow-400 hover:bg-yellow-500 text-gray-800 font-bold py-4 px-8 rounded-full text-2xl transition duration-300 transform hover:scale-110">
            ðŸŽ‚ Click for a surprise!
        </button>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/particles.js@2.0.0/particles.min.js"></script>
    <script>
        // Particle.js configuration for animated background
        particlesJS("particles-js", {
            particles: {
                number: { value: 100 },
                color: { value: "#ffffff" },
                shape: { type: "circle" },
                opacity: { value: 0.5, random: true },
                size: { value: 3, random: true },
                move: { enable: true, speed: 2 }
            }
        });

        // Countdown timer
        function updateCountdown() {
            const now = new Date();
            const nextBirthday = new Date("<%= birthday %>");
            nextBirthday.setFullYear(now.getFullYear() + (now > nextBirthday ? 1 : 0));
            const timeLeft = nextBirthday - now;

            const days = Math.floor(timeLeft / (1000 * 60 * 60 * 24));
            const hours = Math.floor((timeLeft % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60));
            const minutes = Math.floor((timeLeft % (1000 * 60 * 60)) / (1000 * 60));
            const seconds = Math.floor((timeLeft % (1000 * 60)) / 1000);

            document.getElementById("countdown").innerHTML = `${days}d ${hours}h ${minutes}m ${seconds}s`;
        }
        setInterval(updateCountdown, 1000);

        // Typed effect for personalized message
        const message = "On this special day, we celebrate you and all the joy you bring to our lives. May your year ahead be filled with endless possibilities, exciting adventures, and beautiful moments. You're amazing, <%= name %>!";
        let i = 0;
        function typeMessage() {
            if (i < message.length) {
                document.getElementById("typedMessage").innerHTML += message.charAt(i);
                i++;
                setTimeout(typeMessage, 50);
            }
        }
        typeMessage();

        // Surprise button effect
        document.getElementById("cakeButton").addEventListener("click", function() {
            gsap.to(this, {duration: 0.5, rotation: 360, scale: 1.2});
            setTimeout(() => {
                alert("ðŸŽ‰ Surprise! Here's a virtual cake just for you! ðŸŽ‚\nMake a wish and enjoy your special day!");
            }, 500);
        });
    </script>
</body>
</html>